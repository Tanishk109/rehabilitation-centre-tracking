{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/tanishkmittal/Downloads/rehabilitation-centre-tracking/lib/mongodb.ts"],"sourcesContent":["import { MongoClient, Db } from 'mongodb'\n\n// Default connection string if not in env (for scripts and fallback)\nconst defaultUri = 'mongodb+srv://necks:fdLaWizvRAmTYvdG@cluster0.ebmc6q3.mongodb.net/rehabilitation-centre-tracking?retryWrites=true&w=majority&appName=Cluster0'\n\n// Get MongoDB URI from environment or use default\nlet uri: string\n\nif (process.env.MONGODB_URI) {\n  uri = process.env.MONGODB_URI\n} else if (typeof window === 'undefined') {\n  // Server-side: use default if not set (for scripts and development)\n  uri = defaultUri\n  console.warn('⚠️  MONGODB_URI not set, using default connection string')\n} else {\n  // Client-side: should never happen, but handle gracefully\n  throw new Error('MongoDB connection is not available on the client side')\n}\n\nconst options = {\n  // Add connection options for better reliability\n  maxPoolSize: 10,\n  serverSelectionTimeoutMS: 5000,\n  socketTimeoutMS: 45000,\n}\n\nlet client: MongoClient\nlet clientPromise: Promise<MongoClient>\n\nif (process.env.NODE_ENV === 'development') {\n  // In development mode, use a global variable so that the value\n  // is preserved across module reloads caused by HMR (Hot Module Replacement).\n  let globalWithMongo = global as typeof globalThis & {\n    _mongoClientPromise?: Promise<MongoClient>\n  }\n\n  if (!globalWithMongo._mongoClientPromise) {\n    client = new MongoClient(uri, options)\n    globalWithMongo._mongoClientPromise = client.connect()\n  }\n  clientPromise = globalWithMongo._mongoClientPromise\n} else {\n  // In production mode, it's best to not use a global variable.\n  client = new MongoClient(uri, options)\n  clientPromise = client.connect()\n}\n\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\nexport default clientPromise\n\nexport async function getDatabase(): Promise<Db> {\n  try {\n    const client = await clientPromise\n    // Test the connection\n    await client.db('admin').command({ ping: 1 })\n    return client.db('rehabilitation-centre-tracking')\n  } catch (error) {\n    console.error('❌ MongoDB connection error:', error)\n    throw new Error(`Failed to connect to MongoDB: ${error instanceof Error ? error.message : 'Unknown error'}`)\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,qEAAqE;AACrE,MAAM,aAAa;AAEnB,kDAAkD;AAClD,IAAI;AAEJ,IAAI,QAAQ,GAAG,CAAC,WAAW,EAAE;IAC3B,MAAM,QAAQ,GAAG,CAAC,WAAW;AAC/B,OAAO,wCAAmC;IACxC,oEAAoE;IACpE,MAAM;IACN,QAAQ,IAAI,CAAC;AACf;;AAKA,MAAM,UAAU;IACd,gDAAgD;IAChD,aAAa;IACb,0BAA0B;IAC1B,iBAAiB;AACnB;AAEA,IAAI;AACJ,IAAI;AAEJ,wCAA4C;IAC1C,+DAA+D;IAC/D,6EAA6E;IAC7E,IAAI;IAIJ,IAAI,CAAC,gBAAgB,mBAAmB,EAAE;QACxC,SAAS,IAAI,sHAAW,CAAC,KAAK;QAC9B,gBAAgB,mBAAmB,GAAG,OAAO,OAAO;IACtD;IACA,gBAAgB,gBAAgB,mBAAmB;AACrD;;uCAQe;AAER,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM;QACrB,sBAAsB;QACtB,MAAM,OAAO,EAAE,CAAC,SAAS,OAAO,CAAC;YAAE,MAAM;QAAE;QAC3C,OAAO,OAAO,EAAE,CAAC;IACnB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,CAAC,8BAA8B,EAAE,iBAAiB,QAAQ,MAAM,OAAO,GAAG,iBAAiB;IAC7G;AACF"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///Users/tanishkmittal/Downloads/rehabilitation-centre-tracking/app/api/patients/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { getDatabase } from '@/lib/mongodb'\nimport { Patient } from '@/lib/models'\n\n// GET - Fetch all patients (with optional filtering)\nexport async function GET(request: NextRequest) {\n  try {\n    const db = await getDatabase()\n    const patientsCollection = db.collection<Patient>('patients')\n    \n    const { searchParams } = new URL(request.url)\n    const role = searchParams.get('role')\n    const centreId = searchParams.get('centreId')\n    const status = searchParams.get('status')\n    const search = searchParams.get('search')\n\n    let query: { centreId?: string; status?: \"admitted\" | \"under_treatment\" | \"recovering\" | \"discharged\"; $or?: Array<{ name?: { $regex: string; $options: string }; id?: { $regex: string; $options: string }; aadharNumber?: { $regex: string; $options: string } }> } = {}\n\n    // Filter by centreId if centre_admin\n    if (role === 'centre_admin' && centreId) {\n      query.centreId = centreId\n    }\n\n    // Filter by centreId if provided\n    if (centreId && role === 'super_admin') {\n      query.centreId = centreId\n    }\n\n    // Filter by status\n    if (status && (status === 'admitted' || status === 'under_treatment' || status === 'recovering' || status === 'discharged')) {\n      query.status = status as \"admitted\" | \"under_treatment\" | \"recovering\" | \"discharged\"\n    }\n\n    // Search filter\n    if (search) {\n      query.$or = [\n        { name: { $regex: search, $options: 'i' } },\n        { id: { $regex: search, $options: 'i' } },\n        { aadharNumber: { $regex: search, $options: 'i' } }\n      ]\n    }\n\n    const patients = await patientsCollection.find(query).sort({ createdAt: -1 }).toArray()\n    \n    return NextResponse.json({ success: true, data: patients })\n  } catch (error) {\n    console.error('Error fetching patients:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to fetch patients' },\n      { status: 500 }\n    )\n  }\n}\n\n// POST - Create a new patient\nexport async function POST(request: NextRequest) {\n  try {\n    const db = await getDatabase()\n    const patientsCollection = db.collection<Patient>('patients')\n    \n    const body = await request.json()\n    const { role, centreId } = body\n\n    // Validate required fields\n    if (!body.name || !body.name.trim()) {\n      return NextResponse.json(\n        { success: false, error: 'Patient name is required' },\n        { status: 400 }\n      )\n    }\n\n    if (!body.dob || !body.dob.trim()) {\n      return NextResponse.json(\n        { success: false, error: 'Date of birth is required' },\n        { status: 400 }\n      )\n    }\n\n    // Centre admin can only create patients for their centre\n    if (role === 'centre_admin') {\n      // Ensure centreId is set from the request body\n      if (!centreId || centreId === 'undefined' || centreId === 'null' || centreId === '') {\n        return NextResponse.json(\n          { success: false, error: 'Centre ID is required for centre admin. Please ensure you are logged in correctly.' },\n          { status: 400 }\n        )\n      }\n      // Ensure the centreId from the request matches the user's centreId (security check)\n      body.centreId = centreId\n    } else if (role === 'super_admin') {\n      // Super admin must provide centreId\n      if (!body.centreId || body.centreId === 'undefined' || body.centreId === 'null' || body.centreId === '') {\n        return NextResponse.json(\n          { success: false, error: 'Centre ID is required. Please select a centre for the patient.' },\n          { status: 400 }\n        )\n      }\n      // Validate that the centre exists\n      const centresCollection = db.collection('centres')\n      const centre = await centresCollection.findOne({ id: body.centreId })\n      if (!centre) {\n        return NextResponse.json(\n          { success: false, error: 'Invalid centre ID. Please select a valid centre.' },\n          { status: 400 }\n        )\n      }\n    }\n\n    // Generate ID if not provided\n    if (!body.id) {\n      const count = await patientsCollection.countDocuments()\n      body.id = `P${String(count + 1).padStart(3, '0')}`\n    }\n\n    // Calculate age if not provided (handles DD/MM/YYYY format)\n    if (body.dob && !body.age) {\n      let birthDate: Date\n      const dobString = String(body.dob).trim()\n      \n      // Parse DD/MM/YYYY format\n      const ddmmyyyyRegex = /^(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})$/\n      const match = dobString.match(ddmmyyyyRegex)\n      \n      if (match) {\n        const [, day, month, year] = match\n        birthDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day))\n      } else {\n        // Try YYYY-MM-DD format (backward compatibility)\n        birthDate = new Date(dobString)\n      }\n      \n      if (!isNaN(birthDate.getTime())) {\n        const today = new Date()\n        let age = today.getFullYear() - birthDate.getFullYear()\n        const m = today.getMonth() - birthDate.getMonth()\n        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) age--\n        body.age = age\n      }\n    }\n\n    body.medications = body.medications || []\n    body.createdAt = new Date()\n    body.updatedAt = new Date()\n\n    // Remove role from patientData (it's only for validation), but KEEP centreId\n    const { role: _, ...patientData } = body\n    const result = await patientsCollection.insertOne(patientData)\n    \n    return NextResponse.json(\n      { success: true, data: { ...patientData, _id: result.insertedId } },\n      { status: 201 }\n    )\n  } catch (error) {\n    console.error('Error creating patient:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to create patient' },\n      { status: 500 }\n    )\n  }\n}\n\n// PUT - Update a patient\nexport async function PUT(request: NextRequest) {\n  try {\n    const db = await getDatabase()\n    const patientsCollection = db.collection<Patient>('patients')\n    \n    const body = await request.json()\n    const { id, role, centreId } = body\n\n    // Check if patient exists and belongs to centre admin's centre\n    const existingPatient = await patientsCollection.findOne({ id })\n    if (!existingPatient) {\n      return NextResponse.json(\n        { success: false, error: 'Patient not found' },\n        { status: 404 }\n      )\n    }\n\n    // Centre admin can only update patients from their centre\n    if (role === 'centre_admin') {\n      if (!centreId || centreId === 'undefined' || centreId === 'null' || centreId === '') {\n        return NextResponse.json(\n          { success: false, error: 'Centre ID is required for centre admin. Please ensure you are logged in correctly.' },\n          { status: 400 }\n        )\n      }\n      if (existingPatient.centreId !== centreId) {\n        return NextResponse.json(\n          { success: false, error: 'Unauthorized: You can only update patients from your centre' },\n          { status: 403 }\n        )\n      }\n      // Ensure centre admin cannot change centreId\n      body.centreId = centreId\n    }\n\n    // Calculate age if dob changed (handles DD/MM/YYYY format)\n    if (body.dob) {\n      let birthDate: Date\n      const dobString = String(body.dob).trim()\n      \n      // Parse DD/MM/YYYY format\n      const ddmmyyyyRegex = /^(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})$/\n      const match = dobString.match(ddmmyyyyRegex)\n      \n      if (match) {\n        const [, day, month, year] = match\n        birthDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day))\n      } else {\n        // Try YYYY-MM-DD format (backward compatibility)\n        birthDate = new Date(dobString)\n      }\n      \n      if (!isNaN(birthDate.getTime())) {\n        const today = new Date()\n        let age = today.getFullYear() - birthDate.getFullYear()\n        const m = today.getMonth() - birthDate.getMonth()\n        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) age--\n        body.age = age\n      }\n    }\n\n    // Remove role from updateData (it's only for validation), but KEEP centreId\n    const { id: patientId, role: _, ...updateData } = body\n    updateData.updatedAt = new Date()\n\n    const result = await patientsCollection.updateOne(\n      { id: patientId },\n      { $set: updateData }\n    )\n\n    const updatedPatient = await patientsCollection.findOne({ id: patientId })\n    \n    return NextResponse.json({ success: true, data: updatedPatient })\n  } catch (error) {\n    console.error('Error updating patient:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to update patient' },\n      { status: 500 }\n    )\n  }\n}\n\n// DELETE - Delete a patient\nexport async function DELETE(request: NextRequest) {\n  try {\n    const db = await getDatabase()\n    const patientsCollection = db.collection<Patient>('patients')\n    \n    const { searchParams } = new URL(request.url)\n    const id = searchParams.get('id')\n    const role = searchParams.get('role')\n    const centreId = searchParams.get('centreId')\n\n    // Validate id parameter\n    if (!id) {\n      return NextResponse.json(\n        { success: false, error: 'Patient ID is required' },\n        { status: 400 }\n      )\n    }\n\n    // Check if patient exists\n    const patient = await patientsCollection.findOne({ id: id })\n    if (!patient) {\n      return NextResponse.json(\n        { success: false, error: 'Patient not found' },\n        { status: 404 }\n      )\n    }\n\n    // Centre admin can only delete patients from their centre\n    if (role === 'centre_admin' && patient.centreId !== centreId) {\n      return NextResponse.json(\n        { success: false, error: 'Unauthorized: You can only delete patients from your centre' },\n        { status: 403 }\n      )\n    }\n\n    const result = await patientsCollection.deleteOne({ id: id })\n\n    return NextResponse.json({ success: true, message: 'Patient deleted successfully' })\n  } catch (error) {\n    console.error('Error deleting patient:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to delete patient' },\n      { status: 500 }\n    )\n  }\n}\n\n// PATCH - Add medication to patient\nexport async function PATCH(request: NextRequest) {\n  try {\n    const db = await getDatabase()\n    const patientsCollection = db.collection<Patient>('patients')\n    \n    const body = await request.json()\n    const { patientId, medication, role, centreId: userCentreId } = body\n\n    // Check if patient exists\n    const patient = await patientsCollection.findOne({ id: patientId })\n    if (!patient) {\n      return NextResponse.json(\n        { success: false, error: 'Patient not found' },\n        { status: 404 }\n      )\n    }\n\n    // Centre admin can only add medications to patients from their centre\n    if (role === 'centre_admin' && patient.centreId !== userCentreId) {\n      return NextResponse.json(\n        { success: false, error: 'Unauthorized: You can only add medications to patients from your centre' },\n        { status: 403 }\n      )\n    }\n\n    // Generate medication ID\n    const medicationId = `MED${String(patient.medications.length + 1).padStart(3, '0')}`\n    const newMedication = { ...medication, id: medicationId }\n\n    const result = await patientsCollection.updateOne(\n      { id: patientId },\n      { \n        $push: { medications: newMedication },\n        $set: { updatedAt: new Date() }\n      }\n    )\n\n    const updatedPatient = await patientsCollection.findOne({ id: patientId })\n    \n    return NextResponse.json({ success: true, data: updatedPatient })\n  } catch (error) {\n    console.error('Error adding medication:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to add medication' },\n      { status: 500 }\n    )\n  }\n}\n\n"],"names":[],"mappings":"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"}}]
}