{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/tanishkmittal/Downloads/rehabilitation-centre-tracking/lib/mongodb.ts"],"sourcesContent":["import { MongoClient, Db } from 'mongodb'\n\n// Default connection string if not in env (for scripts and fallback)\nconst defaultUri = 'mongodb+srv://necks:fdLaWizvRAmTYvdG@cluster0.ebmc6q3.mongodb.net/rehabilitation-centre-tracking?retryWrites=true&w=majority&appName=Cluster0'\n\n// Get MongoDB URI from environment or use default\nlet uri: string\n\nif (process.env.MONGODB_URI) {\n  uri = process.env.MONGODB_URI\n} else if (typeof window === 'undefined') {\n  // Server-side: use default if not set (for scripts and development)\n  uri = defaultUri\n  console.warn('⚠️  MONGODB_URI not set, using default connection string')\n} else {\n  // Client-side: should never happen, but handle gracefully\n  throw new Error('MongoDB connection is not available on the client side')\n}\n\nconst options = {\n  // Add connection options for better reliability\n  maxPoolSize: 10,\n  serverSelectionTimeoutMS: 5000,\n  socketTimeoutMS: 45000,\n}\n\nlet client: MongoClient\nlet clientPromise: Promise<MongoClient>\n\nif (process.env.NODE_ENV === 'development') {\n  // In development mode, use a global variable so that the value\n  // is preserved across module reloads caused by HMR (Hot Module Replacement).\n  let globalWithMongo = global as typeof globalThis & {\n    _mongoClientPromise?: Promise<MongoClient>\n  }\n\n  if (!globalWithMongo._mongoClientPromise) {\n    client = new MongoClient(uri, options)\n    globalWithMongo._mongoClientPromise = client.connect()\n  }\n  clientPromise = globalWithMongo._mongoClientPromise\n} else {\n  // In production mode, it's best to not use a global variable.\n  client = new MongoClient(uri, options)\n  clientPromise = client.connect()\n}\n\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\nexport default clientPromise\n\nexport async function getDatabase(): Promise<Db> {\n  try {\n    const client = await clientPromise\n    // Test the connection\n    await client.db('admin').command({ ping: 1 })\n    return client.db('rehabilitation-centre-tracking')\n  } catch (error) {\n    console.error('❌ MongoDB connection error:', error)\n    throw new Error(`Failed to connect to MongoDB: ${error instanceof Error ? error.message : 'Unknown error'}`)\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,qEAAqE;AACrE,MAAM,aAAa;AAEnB,kDAAkD;AAClD,IAAI;AAEJ,IAAI,QAAQ,GAAG,CAAC,WAAW,EAAE;IAC3B,MAAM,QAAQ,GAAG,CAAC,WAAW;AAC/B,OAAO,wCAAmC;IACxC,oEAAoE;IACpE,MAAM;IACN,QAAQ,IAAI,CAAC;AACf;;AAKA,MAAM,UAAU;IACd,gDAAgD;IAChD,aAAa;IACb,0BAA0B;IAC1B,iBAAiB;AACnB;AAEA,IAAI;AACJ,IAAI;AAEJ,wCAA4C;IAC1C,+DAA+D;IAC/D,6EAA6E;IAC7E,IAAI;IAIJ,IAAI,CAAC,gBAAgB,mBAAmB,EAAE;QACxC,SAAS,IAAI,sHAAW,CAAC,KAAK;QAC9B,gBAAgB,mBAAmB,GAAG,OAAO,OAAO;IACtD;IACA,gBAAgB,gBAAgB,mBAAmB;AACrD;;uCAQe;AAER,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM;QACrB,sBAAsB;QACtB,MAAM,OAAO,EAAE,CAAC,SAAS,OAAO,CAAC;YAAE,MAAM;QAAE;QAC3C,OAAO,OAAO,EAAE,CAAC;IACnB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM,CAAC,8BAA8B,EAAE,iBAAiB,QAAQ,MAAM,OAAO,GAAG,iBAAiB;IAC7G;AACF"}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///Users/tanishkmittal/Downloads/rehabilitation-centre-tracking/app/api/users/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { getDatabase } from '@/lib/mongodb'\nimport { User } from '@/lib/models'\nimport bcrypt from 'bcryptjs'\n\n// GET - Fetch user by email (for login)\nexport async function GET(request: NextRequest) {\n  try {\n    const db = await getDatabase()\n    const usersCollection = db.collection<User>('users')\n    \n    const { searchParams } = new URL(request.url)\n    const email = searchParams.get('email')\n    const password = searchParams.get('password')\n\n    if (!email) {\n      return NextResponse.json(\n        { success: false, error: 'Email is required' },\n        { status: 400 }\n      )\n    }\n\n    const user = await usersCollection.findOne({ email: email.toLowerCase() })\n    \n    if (!user) {\n      return NextResponse.json(\n        { success: false, error: 'Invalid email or password' },\n        { status: 404 }\n      )\n    }\n\n    // Verify password if provided\n    if (password) {\n      if (!user.password) {\n        return NextResponse.json(\n          { success: false, error: 'Password not set. Please use forgot password.' },\n          { status: 401 }\n        )\n      }\n      \n      const isPasswordValid = await bcrypt.compare(password, user.password)\n      if (!isPasswordValid) {\n        return NextResponse.json(\n          { success: false, error: 'Invalid email or password' },\n          { status: 401 }\n        )\n      }\n    }\n\n    // Check approval status for centre admins (status is optional for super_admin)\n    if (user.role === 'centre_admin' && user.status && user.status !== 'approved') {\n      if (user.status === 'pending') {\n        return NextResponse.json(\n          { \n            success: false, \n            error: 'Your registration is pending approval. Please wait for super admin approval.',\n            status: 'pending'\n          },\n          { status: 403 }\n        )\n      } else if (user.status === 'rejected') {\n        return NextResponse.json(\n          { \n            success: false, \n            error: user.rejectionReason || 'Your registration has been rejected. Please contact support.',\n            status: 'rejected'\n          },\n          { status: 403 }\n        )\n      }\n    }\n\n    // Remove password from response\n    const userWithoutPassword = { ...user }\n    delete userWithoutPassword.password\n    \n    return NextResponse.json({ success: true, data: userWithoutPassword })\n  } catch (error) {\n    console.error('Error fetching user:', error)\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n    // Provide more helpful error messages\n    if (errorMessage.includes('MongoDB') || errorMessage.includes('connection')) {\n      return NextResponse.json(\n        { success: false, error: 'Database connection failed. Please check server configuration.' },\n        { status: 500 }\n      )\n    }\n    return NextResponse.json(\n      { success: false, error: `Failed to fetch user: ${errorMessage}` },\n      { status: 500 }\n    )\n  }\n}\n\n// POST - Create a new user (for initial setup)\nexport async function POST(request: NextRequest) {\n  try {\n    const db = await getDatabase()\n    const usersCollection = db.collection<User>('users')\n    \n    const body = await request.json()\n\n    // Check if user already exists\n    const existingUser = await usersCollection.findOne({ email: body.email.toLowerCase() })\n    if (existingUser) {\n      return NextResponse.json(\n        { success: false, error: 'User already exists' },\n        { status: 400 }\n      )\n    }\n\n    body.email = body.email.toLowerCase()\n    body.createdAt = new Date()\n    body.updatedAt = new Date()\n\n    const result = await usersCollection.insertOne(body)\n    \n    return NextResponse.json(\n      { success: true, data: { ...body, _id: result.insertedId } },\n      { status: 201 }\n    )\n  } catch (error) {\n    console.error('Error creating user:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to create user' },\n      { status: 500 }\n    )\n  }\n}\n\n// PATCH - Update user profile\nexport async function PATCH(request: NextRequest) {\n  try {\n    const db = await getDatabase()\n    const usersCollection = db.collection<User>('users')\n    \n    const body = await request.json()\n    const { userId, email, ...updateData } = body\n\n    if (!userId && !email) {\n      return NextResponse.json(\n        { success: false, error: 'User ID or email is required' },\n        { status: 400 }\n      )\n    }\n\n    // Find the user to update - try by id first, then by email\n    let user: User | null = null\n    let query: { id?: string; email?: string } = {}\n    \n    if (userId) {\n      query = { id: userId }\n      user = await usersCollection.findOne(query)\n    }\n    \n    // If not found by id, try by email\n    if (!user && email) {\n      query = { email: email.toLowerCase() }\n      user = await usersCollection.findOne(query)\n    }\n    \n    if (!user) {\n      return NextResponse.json(\n        { success: false, error: 'User not found' },\n        { status: 404 }\n      )\n    }\n\n    // Fields that can be updated through profile update\n    const allowedFields = ['name', 'phone', 'dob', 'age', 'aadharNumber', 'address']\n    \n    // Filter updateData to only include allowed fields and non-empty values\n    const filteredUpdateData: Partial<User> = {}\n    for (const field of allowedFields) {\n      if (updateData[field] !== undefined && updateData[field] !== null) {\n        // Skip empty strings\n        if (typeof updateData[field] === 'string' && updateData[field].trim() === '') {\n          continue\n        }\n        filteredUpdateData[field as keyof User] = updateData[field]\n      }\n    }\n\n    // Validate and calculate age if DOB is provided\n    if (filteredUpdateData.dob) {\n      let dobValue = filteredUpdateData.dob\n      \n      // Ensure DOB is a string\n      if (typeof dobValue !== 'string') {\n        dobValue = String(dobValue)\n      }\n      \n      // Trim whitespace\n      dobValue = dobValue.trim()\n      \n      // Parse DD/MM/YYYY format\n      const ddmmyyyyRegex = /^(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})$/\n      const match = dobValue.match(ddmmyyyyRegex)\n      \n      if (!match) {\n        // Try to parse YYYY-MM-DD format (for backward compatibility)\n        const yyyymmddRegex = /^(\\d{4})-(\\d{2})-(\\d{2})$/\n        const yyyyMatch = dobValue.match(yyyymmddRegex)\n        if (yyyyMatch) {\n          const [, year, month, day] = yyyyMatch\n          dobValue = `${day}/${month}/${year}`\n        } else {\n          return NextResponse.json(\n            { success: false, error: 'Invalid date format. Please use DD/MM/YYYY format (e.g., 15/05/1990).' },\n            { status: 400 }\n          )\n        }\n      } else {\n        // Normalize DD/MM/YYYY format\n        const [, day, month, year] = match\n        dobValue = `${day.padStart(2, '0')}/${month.padStart(2, '0')}/${year}`\n      }\n      \n      // Parse date for validation\n      const dateParts = dobValue.split('/')\n      if (dateParts.length !== 3) {\n        return NextResponse.json(\n          { success: false, error: 'Invalid date format. Please use DD/MM/YYYY format.' },\n          { status: 400 }\n        )\n      }\n      \n      const day = parseInt(dateParts[0], 10)\n      const month = parseInt(dateParts[1], 10)\n      const year = parseInt(dateParts[2], 10)\n      \n      // Validate date components\n      if (isNaN(day) || isNaN(month) || isNaN(year)) {\n        return NextResponse.json(\n          { success: false, error: 'Invalid date. Please enter valid numbers.' },\n          { status: 400 }\n        )\n      }\n      \n      if (month < 1 || month > 12) {\n        return NextResponse.json(\n          { success: false, error: 'Invalid month. Month must be between 1 and 12.' },\n          { status: 400 }\n        )\n      }\n      \n      if (day < 1 || day > 31) {\n        return NextResponse.json(\n          { success: false, error: 'Invalid day. Day must be between 1 and 31.' },\n          { status: 400 }\n        )\n      }\n      \n      // Create date object for validation\n      const birthDate = new Date(year, month - 1, day)\n      \n      // Validate date is valid (handles invalid dates like 31/02/1990)\n      if (birthDate.getDate() !== day || birthDate.getMonth() !== month - 1 || birthDate.getFullYear() !== year) {\n        return NextResponse.json(\n          { success: false, error: 'Invalid date. Please enter a valid date.' },\n          { status: 400 }\n        )\n      }\n      \n      const today = new Date()\n      today.setHours(0, 0, 0, 0)\n      birthDate.setHours(0, 0, 0, 0)\n      \n      // Validate date is not in the future\n      if (birthDate > today) {\n        return NextResponse.json(\n          { success: false, error: 'Date of birth cannot be in the future' },\n          { status: 400 }\n        )\n      }\n      \n      // Validate date is reasonable (not more than 150 years ago)\n      const minDate = new Date()\n      minDate.setFullYear(today.getFullYear() - 150)\n      minDate.setHours(0, 0, 0, 0)\n      if (birthDate < minDate) {\n        return NextResponse.json(\n          { success: false, error: 'Date of birth is too far in the past (more than 150 years ago)' },\n          { status: 400 }\n        )\n      }\n      \n      // Store DOB in DD/MM/YYYY format\n      filteredUpdateData.dob = dobValue\n      \n      // Calculate age\n      let age = today.getFullYear() - birthDate.getFullYear()\n      const monthDiff = today.getMonth() - birthDate.getMonth()\n      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n        age--\n      }\n      \n      // Validate calculated age is reasonable\n      if (age < 0 || age > 150) {\n        return NextResponse.json(\n          { success: false, error: 'Invalid age calculated from date of birth' },\n          { status: 400 }\n        )\n      }\n      \n      filteredUpdateData.age = age\n    }\n\n    // Validate age if provided directly (without DOB)\n    if (filteredUpdateData.age !== undefined && !filteredUpdateData.dob) {\n      const ageNum = typeof filteredUpdateData.age === 'number' \n        ? filteredUpdateData.age \n        : parseInt(String(filteredUpdateData.age))\n      \n      if (isNaN(ageNum) || ageNum < 0 || ageNum > 150) {\n        return NextResponse.json(\n          { success: false, error: 'Age must be a number between 0 and 150' },\n          { status: 400 }\n        )\n      }\n      filteredUpdateData.age = ageNum\n    }\n\n    // Add updatedAt timestamp\n    filteredUpdateData.updatedAt = new Date()\n\n    // Update the user using the same query we used to find the user\n    const result = await usersCollection.updateOne(\n      query,\n      { $set: filteredUpdateData }\n    )\n\n    if (result.matchedCount === 0) {\n      return NextResponse.json(\n        { success: false, error: 'User not found' },\n        { status: 404 }\n      )\n    }\n\n    // Fetch and return the updated user (without password)\n    const updatedUser = await usersCollection.findOne(query)\n    if (!updatedUser) {\n      return NextResponse.json(\n        { success: false, error: 'Failed to fetch updated user' },\n        { status: 500 }\n      )\n    }\n\n    const userWithoutPassword = { ...updatedUser }\n    delete userWithoutPassword.password\n\n    return NextResponse.json(\n      { success: true, data: userWithoutPassword },\n      { status: 200 }\n    )\n  } catch (error) {\n    console.error('Error updating user profile:', error)\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n    \n    // Provide more specific error messages\n    if (errorMessage.includes('pattern') || errorMessage.includes('validation') || errorMessage.includes('format')) {\n      return NextResponse.json(\n        { success: false, error: 'Invalid data format. Please ensure all fields are in the correct format.' },\n        { status: 400 }\n      )\n    }\n    \n    return NextResponse.json(\n      { success: false, error: `Failed to update profile: ${errorMessage}` },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":"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"}}]
}